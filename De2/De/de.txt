ğŸ“Œ PHáº¦N A â€“ Aggregation nÃ¢ng cao (6 Ä‘iá»ƒm)

DÃ¹ng cÃ¡c collection:

students

departments

courses

enrollments

lecturers

campuses

CÃ¢u 1 (1 Ä‘iá»ƒm)

TÃ­nh GPA cho má»—i sinh viÃªn theo cÃ´ng thá»©c:

score = midterm * 0.4 + final * 0.6
GPA = trung bÃ¬nh score trÃªn táº¥t cáº£ cÃ¡c mÃ´n Ä‘Ã£ há»c


Hiá»ƒn thá»‹:

studentId

fullName

numberOfCourses

GPA

rank (XuatSac, Gioi, Kha, TrungBinh, Yeu)

CÃ¢u 2 (1 Ä‘iá»ƒm)

Thá»‘ng kÃª tá»•ng sá»‘ sinh viÃªn, sá»‘ lÆ°á»£ng sinh viÃªn cÃ³ há»c bá»•ng theo tá»«ng khoa.

Káº¿t quáº£ hiá»ƒn thá»‹:

departmentId

tenKhoa

soSinhVien

soSinhVienCoHocBong

%SinhVienCoHocBong

Sáº¯p xáº¿p theo %SinhVienCoHocBong giáº£m dáº§n.

CÃ¢u 3 (1 Ä‘iá»ƒm)

Danh sÃ¡ch top 3 mÃ´n há»c cÃ³ Ä‘iá»ƒm trung bÃ¬nh cao nháº¥t, tÃ­nh theo táº¥t cáº£ sinh viÃªn Ä‘Ã£ há»c.

Hiá»ƒn thá»‹:

courseId

title

averageScore

soSinhVienHoc

CÃ¢u 4 (1 Ä‘iá»ƒm)

Cho biáº¿t giáº£ng viÃªn cÃ³ Ä‘iá»ƒm trung bÃ¬nh mÃ´n giáº£ng dáº¡y cao nháº¥t (tÃ­nh Ä‘iá»ƒm cá»§a sinh viÃªn há»c mÃ´n Ä‘Ã³).

Hiá»ƒn thá»‹:

lecturerId

fullName

courseId

courseTitle

averageScore

CÃ¢u 5 (1 Ä‘iá»ƒm)

Thá»‘ng kÃª sá»‘ lÆ°á»£ng sinh viÃªn theo campus (North/Central/South), kÃ¨m tá»•ng há»c bá»•ng cá»§a tá»«ng vÃ¹ng.

Hiá»ƒn thá»‹:

campus

soSinhVien

tongHocBong

CÃ¢u 6 (1 Ä‘iá»ƒm)

Xuáº¥t danh sÃ¡ch mÃ´n há»c mÃ  sinh viÃªn cÃ³ GPA â‰¥ 7.0 Ä‘Ã£ há»c, gá»“m:

studentId

fullName

GPA

coursesTaken: [courseId, title, score]

Gá»£i Ã½:
Cáº§n:

tÃ­nh GPA

lookup courses

ghÃ©p dá»¯ liá»‡u enrollments

ğŸ“Œ PHáº¦N B â€“ Replication (2 Ä‘iá»ƒm)

Giáº£ sá»­ báº¡n cáº§n triá»ƒn khai Replica Set cho database university_pro.

CÃ¢u 7 (0.5 Ä‘iá»ƒm)

Viáº¿t cáº¥u hÃ¬nh khá»Ÿi táº¡o 1 replica set gá»“m 3 node:

mongo1:26112 â€“ PRIMARY

mongo2:26110 â€“ SECONDARY

mongo3:26110 â€“ ARBITER

CÃ¢u 8 (0.5 Ä‘iá»ƒm)

Trong tÃ¬nh huá»‘ng PRIMARY bá»‹ máº¥t káº¿t ná»‘i 10 giÃ¢y:

Äiá»u gÃ¬ xáº£y ra vá»›i replica set?

SECONDARY cÃ³ lÃªn lÃ m PRIMARY khÃ´ng?

Khi PRIMARY cÅ© quay láº¡i, nÃ³ cÃ³ trá»Ÿ láº¡i lÃ m PRIMARY khÃ´ng? Giáº£i thÃ­ch.

CÃ¢u 9 (1 Ä‘iá»ƒm)

Viáº¿t lá»‡nh:

ThÃªm má»™t secondary má»›i vÃ o replica set

Chá»‰ Ä‘á»‹nh secondary nÃ y chá»‰ dÃ¹ng cho Ä‘á»c

Thiáº¿t láº­p Æ°u tiÃªn Ä‘á»ƒ node nÃ y khÃ´ng bao giá» trá»Ÿ thÃ nh PRIMARY

ğŸ“Œ PHáº¦N C â€“ Sharding (2 Ä‘iá»ƒm)

DÃ¹ng dataset cÃ³ campus, zone, departmentId â†’ ráº¥t phÃ¹ há»£p Ä‘á»ƒ sharding.

CÃ¢u 10 (0.5 Ä‘iá»ƒm)

Thiáº¿t láº­p cáº¥u hÃ¬nh Sharding:

1 mongos

2 shard server:

shard01

shard02

1 config server replica set (3 node)

YÃªu cáº§u: mÃ´ táº£ cáº¥u trÃºc thÆ° má»¥c + command khá»Ÿi cháº¡y.

CÃ¢u 11 (0.5 Ä‘iá»ƒm)

Trong database university_pro, báº­t sharding vÃ  shard collection students theo key:

{ campus: 1 }


Viáº¿t cÃ¢u lá»‡nh Ä‘áº§y Ä‘á»§.

CÃ¢u 12 (1 Ä‘iá»ƒm)

Giáº£i thÃ­ch:

Táº¡i sao chá»n shard theo campus lÃ  há»£p lÃ½ vá»›i dataset nÃ y?

Náº¿u dataset má»Ÿ rá»™ng lÃªn 500,000 sinh viÃªn:

Campus South = 300,000

Campus North = 140,000

Campus Central = 60,000

â†’ Shard key nÃ y cÃ³ gÃ¢y máº¥t cÃ¢n báº±ng khÃ´ng?
â†’ CÃ¡ch giáº£i quyáº¿t?